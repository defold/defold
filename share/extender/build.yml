context:
    includes: ['{{dynamo_home}}/include', '{{dynamo_home}}/sdk/include']
    symbols: ["DefaultSoundDevice", "NullSoundDevice", "AudioDecoderWav", "CrashExt", "AudioDecoderStbVorbis", "WebViewExt", "AdTruthExt", "IAPExt", "IACExt", "PushExt", "FacebookExt", "ProfilerExt"]
    allowedLibs: ["engine","engine_release","webviewext","adtruthext","profilerext","facebookext","iapext","pushext","iacext","record","record_null","gameobject","ddf","resource","gamesys","graphics","graphics_null","physics_null","BulletDynamics","BulletCollision","LinearMath","Box2D","render","script","luajit-5.1","extension","hid","hid_null","input","particle","rig","dlib","dmglfw","gui","tracking","crashext","sound","sound_null","tremolo","vpx","liveupdate",
                  "libengine.lib","libengine_release.lib","libwebviewext.lib","libadtruthext.lib","libprofilerext.lib","libfacebookext.lib","libiapext.lib","libpushext.lib","libiacext.lib","librecord.lib","librecord_null.lib","libgameobject.lib","libddf.lib","libresource.lib","libgamesys.lib","libgraphics.lib","libgraphics_null.lib","libphysics_null.lib","libBulletDynamics.lib","libBulletCollision.lib","libLinearMath.lib","libBox2D.lib","librender.lib",
                  "libscript.lib","libluajit.lib-5.1","libextension.lib","libhid.lib","libhid_null.lib","libinput.lib","libparticle.lib","librig.lib","libdlib.lib","libdmglfw.lib","libgui.lib","libtracking.lib","libcrashext.lib","libsound.lib","libsound_null.lib","libtremolo.lib","libvpx.lib","libliveupdate.lib",
                  "engine_service","engine_service_null","libengine_service.lib","libengine_service_null.lib"]
    allowedSymbols: ["DefaultSoundDevice", "NullSoundDevice", "AudioDecoderWav", "CrashExt", "AudioDecoderStbVorbis", "WebViewExt", "AdTruthExt", "IAPExt", "IACExt", "PushExt", "FacebookExt", "ProfilerExt"]

main: |
    #include <stdio.h>

    #if __cplusplus
    extern "C" {
    #endif

    {{#symbols}}
    void {{{.}}}();
    {{/symbols}}

    {{#ext.symbols}}
    void {{{.}}}();
    {{/ext.symbols}}

    #if __cplusplus
    }
    #endif

    void dmExportedSymbols() {
        {{#symbols}}
        {{{.}}}();
        {{/symbols}}
        {{#ext.symbols}}
        {{{.}}}();
        {{/ext.symbols}}
    }

    extern int engine_main(int argc, char* argv[]);

    int main(int argc, char *argv[])
    {
        return engine_main(argc, argv);
    }

    #ifdef DM_PLATFORM_ANDROID

    #if __cplusplus
    extern "C" {
    #endif

    struct android_app;
    extern void _glfwPreMain(struct android_app* state);
    extern void app_dummy();

    void android_main(struct android_app* state)
    {
        // Make sure glue isn't stripped.
        app_dummy();
        _glfwPreMain(state);
    }

    #if __cplusplus
    }
    #endif
    #endif


platforms:
  x86_64-osx:
    context:
        frameworks: ["Foundation", "AppKit", "Cocoa", "OpenGL", "OpenAL", "AGL", "IOKit", "Carbon", "CoreVideo"]
        engineLibs: ["engine", "engine_service", "axtls", "webviewext", "adtruthext", "profilerext", "facebookext", "iapext", "pushext", "iacext", "record", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "luajit-5.1", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "vpx", "liveupdate"]
        libPaths:   ["{{dynamo_home}}/lib/x86_64-darwin", "{{dynamo_home}}/ext/lib/x86_64-darwin"]
        defines:    ["DM_PLATFORM_OSX", "LUA_BYTECODE_ENABLE"]
        flags:      ["-fno-exceptions", "-fvisibility=hidden"]
        linkFlags:  ["-pagezero_size", "10000", "-image_base", "100000000"]
        libs:       []
        symbols:    ["AudioDecoderTremolo"]

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    writeLibPattern: 'lib%s.a'
    writeExePattern: 'dmengine'
    allowedLibs:    ["closured","AccountPolicyTranslation","apple_crypto","apple_nghttp2","apr-1\\.0","apr-1","aprutil-1\\.0","aprutil-1","archive\\.2","archive","ATCommandStudioDynamic","ate","AudioIssueDetector","auditd\\.0","auditd","auto","blas","boringssl","BSDPClient\\.A","BSDPClient","bsm\\.0","bsm","bz2\\.1\\.0\\.5","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","cblas","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","clapack","cmph","com_err","compression","coreroutine","CoreStorage","coretls","coretls_cfhelpers","CRFSuite","CRFSuite0\\.12","csfde","cups\\.2","cups","cupscgi\\.1","cupscgi","cupsimage\\.2","cupsimage","cupsmime\\.1","cupsmime","cupsppdc\\.1","cupsppdc","curl\\.3","curl\\.4","curl","curses","dbm","des425","DHCPServer\\.A","DHCPServer","DiagnosticMessagesClient","dl","dns_services","dscsym","dtrace","dz","easyperf","ecpg\\.6\\.5","ecpg\\.6","ecpg","ecpg_compat\\.3\\.5","ecpg_compat\\.3","ecpg_compat","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","expat\\.1","expat","exslt\\.0","exslt","extension","f77lapack","FDR_osx","ffi","form\\.5\\.4","form","Fosl_dynamic","gcc_s\\.1","gcc_s\\.10\\.4","gcc_s\\.10\\.5","germantok","gmalloc","gssapi_krb5","heimdal-asn1","hunspell-1\\.2\\.0\\.0\\.0","hunspell-1\\.2\\.0","hunspell-1\\.2","IASAuthReboot","IASUnifiedProgress","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","info","iodbc\\.2\\.1\\.18","iodbc\\.2","iodbc","iodbcinst\\.2\\.1\\.18","iodbcinst\\.2","iodbcinst","ipconfig","ipsec\\.A","ipsec","k5crypto","krb4","krb5","krb524","krb5support","ktrace","langid","lapack","lber","ldap","ldap_r","lzma\\.5","lzma","m","marisa","Match\\.1","Match","MaxEnt","mecab\\.1\\.0\\.0","mecab","mecabra","menu\\.5\\.4","menu","mx\\.A","mx","ncurses\\.5\\.4","ncurses\\.5","ncurses","netsnmp\\.15\\.1\\.2","netsnmp\\.15","netsnmp\\.25","netsnmp\\.5\\.2\\.1","netsnmp\\.5","netsnmp","netsnmpagent\\.25","netsnmpagent","netsnmphelpers\\.25","netsnmphelpers","netsnmpmibs\\.25","netsnmpmibs","netsnmptrapd\\.25","netsnmptrapd","network","networkextension","nfrestore","nfshared","objc\\.A","objc","odfde","odmodule","OpenScriptingUtil","pam\\.1","pam\\.2","pam","panel\\.5\\.4","panel","ParallelCompression","pcap\\.A","pcap","pcre\\.0","pcre","pcreposix\\.0","pcreposix","pgtypes\\.3\\.4","pgtypes\\.3","pgtypes","pmenergy","pmsample","poll","pq\\.5\\.6","pq\\.5","pq","prequelite","proc","pthread","python","python2\\.7","QMIParserDynamic","quit","readline","resolv\\.9","resolv","rpcsvc","ruby\\.2\\.3\\.0","ruby\\.2\\.3","ruby","sandbox\\.1","sandbox","sasl2\\.2\\.0\\.1","sasl2\\.2\\.0\\.15","sasl2\\.2\\.0\\.21","sasl2\\.2\\.0\\.22","sasl2\\.2","sasl2","ScreenReader","SMC","spindump","sqlite3\\.0","sqlite3","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","sysdiagnose","sysmon","System\\.B","System","systemstats","tailspin","tcl","tcl8\\.5","TelephonyUtilDynamic","termcap","ThaiTokenizer","tidy\\.A","tidy","tk","tk8\\.5","tzupdate","UniversalAccess","usrtcp","util","util1\\.0","xar\\.1","xar","xcselect","xml2\\.2","xml2","Xplugin\\.1","Xplugin","XSEvent","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.11","z\\.1\\.2\\.5","z\\.1\\.2\\.8","z\\.1","z","log_AppleLDAPTypes","log_audio","log_coreacc","log_cu","log_geo","log_location","log_mediaremote","log_network","log_odtypes","log_signpost\\.description","log_signpost\\.telemetry","log_SystemConfiguration","PN548_API","PN548_HAL_OSX","PN548_OSX","ssh-keychain","dispatch","system_pthread","cache","commonCrypto","compiler_rt","copyfile","corecrypto","corecrypto_trace","dispatch","dyld","keymgr","kxld","launch","macho","mathCommon\\.A","mathCommon","quarantine","removefile","system_asl","system_blocks","system_c","system_configuration","system_coreservices","system_darwin","system_dnssd","system_info","system_kernel","system_m","system_malloc","system_network","system_networkextension","system_notify","system_platform","system_pthread","system_sandbox","system_secinit","system_symptoms","system_trace","unc","unwind","xpc","AGL","AVFoundation","AVKit","Accelerate","Accounts","AddressBook","AppKit","AppKitScripting","AppleScriptKit","AppleScriptObjC","ApplicationServices","AudioToolbox","AudioUnit","AudioVideoBridging","Automator","CFNetwork","CalendarStore","Carbon","CloudKit","Cocoa","Collaboration","ColorSync","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreDisplay","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreMIDIServer","CoreML","CoreMedia","CoreMediaIO","CoreServices","CoreSpotlight","CoreTelephony","CoreText","CoreVideo","CoreWLAN","CryptoTokenKit","DVComponentGlue","DVDPlayback","DirectoryService","DiscRecording","DiscRecordingUI","DiskArbitration","DrawSprocket","EventKit","ExceptionHandling","ExternalAccessory","FWAUserLib","FinderSync","ForceFeedback","Foundation","GLKit","GLUT","GSS","GameController","GameKit","GameplayKit","Hypervisor","ICADevices","IMServicePlugIn","IOBluetooth","IOBluetoothUI","IOKit","IOSurface","ImageCaptureCore","ImageIO","InputMethodKit","InstallerPlugins","InstantMessage","Intents","JavaFrameEmbedding","JavaScriptCore","JavaVM","Kerberos","Kernel","LDAP","LatentSemanticMapping","LocalAuthentication","MapKit","MediaAccessibility","MediaLibrary","MediaPlayer","MediaToolbox","Message","Metal","MetalKit","MetalPerformanceShaders","ModelIO","MultipeerConnectivity","NetFS","NetworkExtension","NotificationCenter","OSAKit","OpenAL","OpenCL","OpenDirectory","OpenGL","PCSC","Photos","PhotosUI","PreferencePanes","Python","QTKit","Quartz","QuartzCore","QuickLook","QuickTime","Ruby","SafariServices","SceneKit","ScreenSaver","Scripting","ScriptingBridge","Security","SecurityFoundation","SecurityInterface","ServiceManagement","Social","SpriteKit","StoreKit","SyncServices","System","SystemConfiguration","TWAIN","Tcl","Tk","VideoDecodeAcceleration","VideoToolbox","Vision","WebKit","vmnet"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-f(no-)?objc-arc(-exceptions)?","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-Wl,[-_a-zA-Z0-9]+","-fno-rtti"]
    compileCmd: 'clang++ -c -arch x86_64 -target x86_64-apple-darwin12 -isysroot /opt/MacOSX10.13.sdk/ -m64 -O2 -g -mmacosx-version-min=10.7 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch x86_64 -target x86_64-apple-darwin12 -isysroot /opt/MacOSX10.13.sdk/ -m64 -O2 -g -mmacosx-version-min=10.7 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  x86-osx:
    context:
        frameworks: ["Foundation", "AppKit", "Cocoa", "OpenGL", "OpenAL", "AGL", "IOKit", "Carbon", "CoreVideo"]
        engineLibs: ["engine", "engine_service", "axtls", "webviewext", "adtruthext", "profilerext", "facebookext", "iapext", "pushext", "iacext", "record", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "luajit-5.1", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "vpx", "liveupdate"]
        libPaths:   ["{{dynamo_home}}/lib/darwin", "{{dynamo_home}}/ext/lib/darwin"]
        defines:    ["DM_PLATFORM_OSX", "LUA_BYTECODE_ENABLE"]
        flags:      ["-fno-exceptions", "-fvisibility=hidden"]
        linkFlags:  []
        libs:       []
        symbols:    ["AudioDecoderTremolo"]

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    writeLibPattern: 'lib%s.a'
    writeExePattern: 'dmengine'
    allowedLibs:    ["closured","AccountPolicyTranslation","apple_crypto","apple_nghttp2","apr-1\\.0","apr-1","aprutil-1\\.0","aprutil-1","archive\\.2","archive","ATCommandStudioDynamic","ate","AudioIssueDetector","auditd\\.0","auditd","auto","blas","boringssl","BSDPClient\\.A","BSDPClient","bsm\\.0","bsm","bz2\\.1\\.0\\.5","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","cblas","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","clapack","cmph","com_err","compression","coreroutine","CoreStorage","coretls","coretls_cfhelpers","CRFSuite","CRFSuite0\\.12","csfde","cups\\.2","cups","cupscgi\\.1","cupscgi","cupsimage\\.2","cupsimage","cupsmime\\.1","cupsmime","cupsppdc\\.1","cupsppdc","curl\\.3","curl\\.4","curl","curses","dbm","des425","DHCPServer\\.A","DHCPServer","DiagnosticMessagesClient","dl","dns_services","dscsym","dtrace","dz","easyperf","ecpg\\.6\\.5","ecpg\\.6","ecpg","ecpg_compat\\.3\\.5","ecpg_compat\\.3","ecpg_compat","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","expat\\.1","expat","exslt\\.0","exslt","extension","f77lapack","FDR_osx","ffi","form\\.5\\.4","form","Fosl_dynamic","gcc_s\\.1","gcc_s\\.10\\.4","gcc_s\\.10\\.5","germantok","gmalloc","gssapi_krb5","heimdal-asn1","hunspell-1\\.2\\.0\\.0\\.0","hunspell-1\\.2\\.0","hunspell-1\\.2","IASAuthReboot","IASUnifiedProgress","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","info","iodbc\\.2\\.1\\.18","iodbc\\.2","iodbc","iodbcinst\\.2\\.1\\.18","iodbcinst\\.2","iodbcinst","ipconfig","ipsec\\.A","ipsec","k5crypto","krb4","krb5","krb524","krb5support","ktrace","langid","lapack","lber","ldap","ldap_r","lzma\\.5","lzma","m","marisa","Match\\.1","Match","MaxEnt","mecab\\.1\\.0\\.0","mecab","mecabra","menu\\.5\\.4","menu","mx\\.A","mx","ncurses\\.5\\.4","ncurses\\.5","ncurses","netsnmp\\.15\\.1\\.2","netsnmp\\.15","netsnmp\\.25","netsnmp\\.5\\.2\\.1","netsnmp\\.5","netsnmp","netsnmpagent\\.25","netsnmpagent","netsnmphelpers\\.25","netsnmphelpers","netsnmpmibs\\.25","netsnmpmibs","netsnmptrapd\\.25","netsnmptrapd","network","networkextension","nfrestore","nfshared","objc\\.A","objc","odfde","odmodule","OpenScriptingUtil","pam\\.1","pam\\.2","pam","panel\\.5\\.4","panel","ParallelCompression","pcap\\.A","pcap","pcre\\.0","pcre","pcreposix\\.0","pcreposix","pgtypes\\.3\\.4","pgtypes\\.3","pgtypes","pmenergy","pmsample","poll","pq\\.5\\.6","pq\\.5","pq","prequelite","proc","pthread","python","python2\\.7","QMIParserDynamic","quit","readline","resolv\\.9","resolv","rpcsvc","ruby\\.2\\.3\\.0","ruby\\.2\\.3","ruby","sandbox\\.1","sandbox","sasl2\\.2\\.0\\.1","sasl2\\.2\\.0\\.15","sasl2\\.2\\.0\\.21","sasl2\\.2\\.0\\.22","sasl2\\.2","sasl2","ScreenReader","SMC","spindump","sqlite3\\.0","sqlite3","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","sysdiagnose","sysmon","System\\.B","System","systemstats","tailspin","tcl","tcl8\\.5","TelephonyUtilDynamic","termcap","ThaiTokenizer","tidy\\.A","tidy","tk","tk8\\.5","tzupdate","UniversalAccess","usrtcp","util","util1\\.0","xar\\.1","xar","xcselect","xml2\\.2","xml2","Xplugin\\.1","Xplugin","XSEvent","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.11","z\\.1\\.2\\.5","z\\.1\\.2\\.8","z\\.1","z","log_AppleLDAPTypes","log_audio","log_coreacc","log_cu","log_geo","log_location","log_mediaremote","log_network","log_odtypes","log_signpost\\.description","log_signpost\\.telemetry","log_SystemConfiguration","PN548_API","PN548_HAL_OSX","PN548_OSX","ssh-keychain","dispatch","system_pthread","cache","commonCrypto","compiler_rt","copyfile","corecrypto","corecrypto_trace","dispatch","dyld","keymgr","kxld","launch","macho","mathCommon\\.A","mathCommon","quarantine","removefile","system_asl","system_blocks","system_c","system_configuration","system_coreservices","system_darwin","system_dnssd","system_info","system_kernel","system_m","system_malloc","system_network","system_networkextension","system_notify","system_platform","system_pthread","system_sandbox","system_secinit","system_symptoms","system_trace","unc","unwind","xpc","AGL","AVFoundation","AVKit","Accelerate","Accounts","AddressBook","AppKit","AppKitScripting","AppleScriptKit","AppleScriptObjC","ApplicationServices","AudioToolbox","AudioUnit","AudioVideoBridging","Automator","CFNetwork","CalendarStore","Carbon","CloudKit","Cocoa","Collaboration","ColorSync","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreDisplay","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreMIDIServer","CoreML","CoreMedia","CoreMediaIO","CoreServices","CoreSpotlight","CoreTelephony","CoreText","CoreVideo","CoreWLAN","CryptoTokenKit","DVComponentGlue","DVDPlayback","DirectoryService","DiscRecording","DiscRecordingUI","DiskArbitration","DrawSprocket","EventKit","ExceptionHandling","ExternalAccessory","FWAUserLib","FinderSync","ForceFeedback","Foundation","GLKit","GLUT","GSS","GameController","GameKit","GameplayKit","Hypervisor","ICADevices","IMServicePlugIn","IOBluetooth","IOBluetoothUI","IOKit","IOSurface","ImageCaptureCore","ImageIO","InputMethodKit","InstallerPlugins","InstantMessage","Intents","JavaFrameEmbedding","JavaScriptCore","JavaVM","Kerberos","Kernel","LDAP","LatentSemanticMapping","LocalAuthentication","MapKit","MediaAccessibility","MediaLibrary","MediaPlayer","MediaToolbox","Message","Metal","MetalKit","MetalPerformanceShaders","ModelIO","MultipeerConnectivity","NetFS","NetworkExtension","NotificationCenter","OSAKit","OpenAL","OpenCL","OpenDirectory","OpenGL","PCSC","Photos","PhotosUI","PreferencePanes","Python","QTKit","Quartz","QuartzCore","QuickLook","QuickTime","Ruby","SafariServices","SceneKit","ScreenSaver","Scripting","ScriptingBridge","Security","SecurityFoundation","SecurityInterface","ServiceManagement","Social","SpriteKit","StoreKit","SyncServices","System","SystemConfiguration","TWAIN","Tcl","Tk","VideoDecodeAcceleration","VideoToolbox","Vision","WebKit","vmnet"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-f(no-)?objc-arc(-exceptions)?","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-Wl,[-_a-zA-Z0-9]+","-fno-rtti"]
    compileCmd: 'clang++ -c -arch i386 -target x86_64-apple-darwin12 -isysroot /opt/MacOSX10.13.sdk/ -m32 -O2 -g -mmacosx-version-min=10.7 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch i386 -target x86_64-apple-darwin12 -isysroot /opt/MacOSX10.13.sdk/ -m32 -O2 -g -mmacosx-version-min=10.7 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  arm64-ios:
    context:
        frameworks: ["Foundation", "OpenGLES", "OpenAL", "QuartzCore", "CoreGraphics", "AudioToolbox", "SystemConfiguration", "CoreVideo", "UIKit", "CoreTelephony", "StoreKit", "Security"]
        weakFrameworks: ["Accounts", "Social", "AdSupport"]
        engineLibs: ["engine", "engine_service", "axtls", "webviewext", "adtruthext", "profilerext", "facebookext", "iapext", "pushext", "iacext", "record_null", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "lua", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "liveupdate", "FBSDKCore", "FBSDKLogin", "FBSDKShare"]
        libPaths:   ["{{dynamo_home}}/lib/arm64-darwin", "{{dynamo_home}}/ext/lib/arm64-darwin"]
        defines:    ["DM_PLATFORM_IOS"]
        flags:      ["-fno-exceptions", "-fvisibility=hidden"]
        linkFlags:  ['-fobjc-link-runtime', '-dead_strip']
        libs:       []
        symbols:    ["AudioDecoderTremolo"]

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    writeLibPattern: 'lib%s.a'
    writeExePattern: 'dmengine'
    allowedLibs:    ["CarrierBundleUtilities","IOABPLib","Accessibility","acmobileshim","afc","AHTRestore","amsupport","apple_crypto","apple_nghttp2","AppPatch","archive\\.2","archive","ARI","ARIServer","assertion_launchd","ate","AudioIssueDetector","AudioStatistics","authinstall","AWDProtobufBluetooth","AWDProtobufFacetime","AWDProtobufFacetimeiMessage","AWDProtobufGCK","AWDProtobufLocation","AWDSupport","AWDSupportFramework","AXSafeCategoryBundle","AXSpeechManager","BasebandManager","BKDM1","BKDM2","boringssl","bsm\\.0","bsm","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","cmph","compression","coretls","coretls_cfhelpers","CRFSuite","CRFSuite0\\.12","CTGreenTeaLogger","CTLogHelper","cupolicy","cups","curses","dbm","DHCPServer\\.A","DHCPServer","dl","dns_services","dscsym","easyperf","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","ETLDIAGLoggingDynamic","ETLDLFDynamic","ETLDLOADCoreDumpDynamic","ETLDLOADDynamic","ETLDMCDynamic","ETLDynamic","ETLEFSDumpDynamic","ETLSAHDynamic","exslt\\.0","exslt","extension","form\\.5\\.4","form","germantok","H5Dynamic","HDLCDynamic","heimdal-asn1","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","InFieldCollection","info","IOAccessoryManager","ipconfig","ipsec\\.A","ipsec","ktrace","langid","LLVM-C","LLVM","lockdown","lzma\\.5","lzma","m","marisa","Match\\.1","Match","mav_ipc_router_dynamic","MaxEnt","mecab_em","mecabra","mis","MobileCheckpoint","MobileGestalt","MobileGestaltExtensions","morphun","ncurses\\.5\\.4","ncurses","network","networkextension","nfshared","objc\\.A","objc","omadm","ParallelCompression","PCITransport","poll","PPM","prequelite","proc","protobuf-lite","protobuf","pthread","QLCharts","quic","resolv\\.9","resolv","rpcsvc","sandbox\\.1","sandbox","sp","spindump","sqlite3\\.0","sqlite3","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","sysdiagnose","System\\.B","System","systemstats","tailspin","TelephonyBasebandDynamic","TelephonyDebugDynamic","TelephonyIOKitDynamic","TelephonyUSBDynamic","TelephonyUtilDynamic","ThaiTokenizer","tidy\\.A","tidy","tzupdate","USBTransport","usrtcp","util","util1\\.0","WAPI","xml2\\.2","xml2","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.11","z\\.1\\.2\\.5","z\\.1\\.2\\.8","z\\.1","z","ARKit","AVFoundation","AVKit","Accelerate","Accounts","AdSupport","AddressBook","AddressBookUI","AssetsLibrary","AudioToolbox","AudioUnit","CFNetwork","CallKit","CloudKit","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreML","CoreMedia","CoreMotion","CoreNFC","CoreSpotlight","CoreTelephony","CoreText","CoreVideo","DeviceCheck","EventKit","EventKitUI","ExternalAccessory","FileProvider","FileProviderUI","Foundation","GLKit","GSS","GameController","GameKit","GameplayKit","HealthKit","HealthKitUI","HomeKit","IOKit","IOSurface","IdentityLookup","ImageIO","Intents","IntentsUI","JavaScriptCore","LocalAuthentication","MapKit","MediaAccessibility","MediaPlayer","MediaToolbox","MessageUI","Messages","Metal","MetalKit","MetalPerformanceShaders","MobileCoreServices","ModelIO","MultipeerConnectivity","NetworkExtension","NewsstandKit","NotificationCenter","OpenAL","OpenGLES","PDFKit","PassKit","Photos","PhotosUI","PushKit","QuartzCore","QuickLook","ReplayKit","SafariServices","SceneKit","Security","Social","Speech","SpriteKit","StoreKit","SystemConfiguration","Twitter","UIKit","UserNotifications","UserNotificationsUI","VideoSubscriberAccount","VideoToolbox","Vision","WatchConnectivity","WatchKit","WebKit","iAd"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-f(no-)?objc-arc(-exceptions)?","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-Wl,[-_a-zA-Z0-9]+","-fno-rtti"]
    compileCmd: 'clang++ -c -arch arm64 -target arm-apple-darwin12 -isysroot /opt/iPhoneOS11.2.sdk/ -m64 -O2 -g -miphoneos-version-min=6.0 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch arm64 -target arm-apple-darwin12 -isysroot /opt/iPhoneOS11.2.sdk/ -m64 -O2 -g -miphoneos-version-min=6.0 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#weakFrameworks}}-weak_framework {{{.}}} {{/weakFrameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  armv7-ios:
    context:
        frameworks: ["Foundation", "OpenGLES", "OpenAL", "QuartzCore", "CoreGraphics", "AudioToolbox", "SystemConfiguration", "CoreVideo", "UIKit", "CoreTelephony", "StoreKit", "Security"]
        weakFrameworks: ["Accounts", "Social", "AdSupport"]
        engineLibs: ["engine", "engine_service", "axtls", "webviewext", "adtruthext", "profilerext", "facebookext", "iapext", "pushext", "iacext", "record_null", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "luajit-5.1", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "liveupdate", "FBSDKCore", "FBSDKLogin", "FBSDKShare" ]
        libPaths:   ["{{dynamo_home}}/lib/armv7-darwin", "{{dynamo_home}}/ext/lib/armv7-darwin"]
        defines:    ["DM_PLATFORM_IOS", "LUA_BYTECODE_ENABLE"]
        flags:      ["-fno-exceptions", "-fvisibility=hidden"]
        linkFlags:  ['-fobjc-link-runtime', '-dead_strip']
        libs:       []
        symbols:    ["AudioDecoderTremolo"]

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    writeLibPattern: 'lib%s.a'
    writeExePattern: 'dmengine'
    allowedLibs:    ["CarrierBundleUtilities","IOABPLib","Accessibility","acmobileshim","afc","AHTRestore","amsupport","apple_crypto","apple_nghttp2","AppPatch","archive\\.2","archive","ARI","ARIServer","assertion_launchd","ate","AudioIssueDetector","AudioStatistics","authinstall","AWDProtobufBluetooth","AWDProtobufFacetime","AWDProtobufFacetimeiMessage","AWDProtobufGCK","AWDProtobufLocation","AWDSupport","AWDSupportFramework","AXSafeCategoryBundle","AXSpeechManager","BasebandManager","BKDM1","BKDM2","boringssl","bsm\\.0","bsm","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","cmph","compression","coretls","coretls_cfhelpers","CRFSuite","CRFSuite0\\.12","CTGreenTeaLogger","CTLogHelper","cupolicy","cups","curses","dbm","DHCPServer\\.A","DHCPServer","dl","dns_services","dscsym","easyperf","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","ETLDIAGLoggingDynamic","ETLDLFDynamic","ETLDLOADCoreDumpDynamic","ETLDLOADDynamic","ETLDMCDynamic","ETLDynamic","ETLEFSDumpDynamic","ETLSAHDynamic","exslt\\.0","exslt","extension","form\\.5\\.4","form","germantok","H5Dynamic","HDLCDynamic","heimdal-asn1","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","InFieldCollection","info","IOAccessoryManager","ipconfig","ipsec\\.A","ipsec","ktrace","langid","LLVM-C","LLVM","lockdown","lzma\\.5","lzma","m","marisa","Match\\.1","Match","mav_ipc_router_dynamic","MaxEnt","mecab_em","mecabra","mis","MobileCheckpoint","MobileGestalt","MobileGestaltExtensions","morphun","ncurses\\.5\\.4","ncurses","network","networkextension","nfshared","objc\\.A","objc","omadm","ParallelCompression","PCITransport","poll","PPM","prequelite","proc","protobuf-lite","protobuf","pthread","QLCharts","quic","resolv\\.9","resolv","rpcsvc","sandbox\\.1","sandbox","sp","spindump","sqlite3\\.0","sqlite3","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","sysdiagnose","System\\.B","System","systemstats","tailspin","TelephonyBasebandDynamic","TelephonyDebugDynamic","TelephonyIOKitDynamic","TelephonyUSBDynamic","TelephonyUtilDynamic","ThaiTokenizer","tidy\\.A","tidy","tzupdate","USBTransport","usrtcp","util","util1\\.0","WAPI","xml2\\.2","xml2","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.11","z\\.1\\.2\\.5","z\\.1\\.2\\.8","z\\.1","z","ARKit","AVFoundation","AVKit","Accelerate","Accounts","AdSupport","AddressBook","AddressBookUI","AssetsLibrary","AudioToolbox","AudioUnit","CFNetwork","CallKit","CloudKit","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreML","CoreMedia","CoreMotion","CoreNFC","CoreSpotlight","CoreTelephony","CoreText","CoreVideo","DeviceCheck","EventKit","EventKitUI","ExternalAccessory","FileProvider","FileProviderUI","Foundation","GLKit","GSS","GameController","GameKit","GameplayKit","HealthKit","HealthKitUI","HomeKit","IOKit","IOSurface","IdentityLookup","ImageIO","Intents","IntentsUI","JavaScriptCore","LocalAuthentication","MapKit","MediaAccessibility","MediaPlayer","MediaToolbox","MessageUI","Messages","Metal","MetalKit","MetalPerformanceShaders","MobileCoreServices","ModelIO","MultipeerConnectivity","NetworkExtension","NewsstandKit","NotificationCenter","OpenAL","OpenGLES","PDFKit","PassKit","Photos","PhotosUI","PushKit","QuartzCore","QuickLook","ReplayKit","SafariServices","SceneKit","Security","Social","Speech","SpriteKit","StoreKit","SystemConfiguration","Twitter","UIKit","UserNotifications","UserNotificationsUI","VideoSubscriberAccount","VideoToolbox","Vision","WatchConnectivity","WatchKit","WebKit","iAd"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-f(no-)?objc-arc(-exceptions)?","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-Wl,[-_a-zA-Z0-9]+","-fno-rtti"]
    compileCmd: 'clang++ -c -arch armv7 -target arm-apple-darwin12 -isysroot /opt/iPhoneOS11.2.sdk/ -m32 -g -O2 -miphoneos-version-min=6.0 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch armv7 -target arm-apple-darwin12 -isysroot /opt/iPhoneOS11.2.sdk/ -m32 -g -O2 -miphoneos-version-min=6.0 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#weakFrameworks}}-weak_framework {{{.}}} {{/weakFrameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  armv7-android:
    context:
        engineJars: ["{{dynamo_home}}/ext/share/java/facebooksdk.jar", "{{dynamo_home}}/ext/share/java/bolts-android-1.2.0.jar", "{{dynamo_home}}/ext/share/java/google-play-services.jar", "{{dynamo_home}}/ext/share/java/android-support-v4.jar", "{{dynamo_home}}/ext/share/java/android-support-multidex.jar", "{{dynamo_home}}/ext/share/java/in-app-purchasing-2.0.61.jar", "{{dynamo_home}}/share/java/glfw_android.jar", "{{dynamo_home}}/share/java/facebook_android.jar", "{{dynamo_home}}/share/java/gamesys_android.jar", "{{dynamo_home}}/share/java/iap_android.jar", "{{dynamo_home}}/share/java/push_android.jar", "{{dynamo_home}}/share/java/adtruth_android.jar", "{{dynamo_home}}/share/java/sound_android.jar", "{{dynamo_home}}/share/java/webview_android.jar", "{{dynamo_home}}/share/java/iac_android.jar"]
        engineLibs: ["engine", "engine_service", "axtls", "webviewext", "adtruthext", "profilerext", "facebookext", "iapext", "pushext", "iacext", "record_null", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "luajit-5.1", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "openal_soft", "tremolo", "liveupdate"]
        libPaths:   ["{{dynamo_home}}/lib/armv7-android", "{{dynamo_home}}/ext/lib/armv7-android", "{{android_stl_lib}}"]
        defines:    ["DM_PLATFORM_ANDROID", "LUA_BYTECODE_ENABLE", "__ARM_ARCH_5__", "__ARM_ARCH_5T__", "__ARM_ARCH_5E__", "__ARM_ARCH_5TE__"]
        platformIncludes:   ["{{android_ndk_path}}/sources/android/native_app_glue", "{{android_ndk_path}}/sources/android/cpufeatures", "{{android_ndk_include}}", "{{android_stl_include}}", "{{android_stl_arch_include}}"]
        flags:      ["-fno-exceptions", "-fvisibility=hidden"]
        linkFlags:  []
        libs:       []
        symbols:    ["AudioDecoderTremolo"]

    exePrefix: 'lib'
    exeExt: '.so'
    shlibRe: 'lib(.+).so'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).+(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)$'
    javaSourceRe: '(?i).+(\.java)$'
    writeLibPattern: 'lib%s.a'
    writeExePattern: 'libdmengine.so'
    allowedLibs: [ "EGL","GLESv1_CM","GLESv2","GLESv3","OpenMAXAL","OpenSLES","RSSupport","RScpp_static","android","c","c\\+\\+_shared","c\\+\\+_static","compiler_rt","compiler_rt_shared","compiler_rt_static","dl","gabi\\+\\+_shared","gabi\\+\\+_static","gccunwind","gnustl_shared","gnustl_static","jnigraphics","log","m","m_hard","mediandk","portable","stdc\\+\\+","stlport_shared","stlport_static","supc\\+\\+","thread_db","z"]
    allowedFlags: ["-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-rdynamic","-Wl,[-_a-zA-Z0-9]+","-fno-rtti","-fpermissive"]
    compileCmd: 'arm-linux-androideabi-g++ -c -g -gdwarf-2 -fpic -ffunction-sections -fstack-protector -Wno-psabi -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -funwind-tables --sysroot={{android_sysroot}} -DANDROID -Wa,--noexecstack {{#defines}}-D{{.}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{.}} {{/ext.includes}} {{#includes}}-I{{.}} {{/includes}} {{#platformIncludes}}-I{{.}} {{/platformIncludes}} {{src}} -o{{tgt}}'
    linkCmd: 'arm-linux-androideabi-g++ --sysroot={{android_sysroot}} -lEGL -lGLESv1_CM -lGLESv2 {{#src}}{{.}} {{/src}} -o {{tgt}} -Wl,-soname=libdmengine.so {{#defines}}-D{{.}} {{/defines}} {{#linkFlags}}{{{.}}} {{/linkFlags}} -Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,-z,noexecstack -landroid -fpic -z text {{#ext.libPaths}}-L{{.}} {{/ext.libPaths}} {{#libPaths}}-L{{.}} {{/libPaths}} -Wl,-Bstatic -Wl,--start-group {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{.}} {{/ext.libs}} {{#engineLibs}}-l{{.}} {{/engineLibs}} -Wl,--end-group -Wl,-Bdynamic -lOpenSLES -lgnustl_static -lm -llog -lc -Wl,--no-undefined -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -shared'
    libCmd: 'arm-linux-androideabi-ar rcs {{tgt}} {{#objs}}{{.}} {{/objs}}'
    javacCmd: 'javac -source 1.6 -target 1.6 -J-Xms2048m -J-Xmx2048m -classpath {{dynamo_home}}/ext/share/java/android-support-v4.jar:{{dynamo_home}}/ext/share/java/android.jar:{{classPath}} -d {{classesDir}} @{{sourcesListFile}}'
    jarCmd: 'jar cf {{outputJar}} -C {{classesDir}} .'
    dxCmd: 'dx -JXms2048m -JXmx2048m --dex --multi-dex --output {{classes_dex_dir}} {{#jars}}{{.}} {{/jars}} {{#engineJars}}{{.}} {{/engineJars}}'

  js-web:
    env:
        EM_CACHE:   "{{build_folder}}"
    context:
        engineJsLibs: ["glfw", "sys", "script", "facebook", "facebook_iap", "sound"]
        engineLibs: ["engine", "engine_service", "axtls", "webviewext", "adtruthext", "profilerext", "facebookext", "iapext", "pushext", "iacext", "record_null", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "lua", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "liveupdate", "sound"]
        libPaths:   ["{{dynamo_home}}/lib/js-web", "{{dynamo_home}}/ext/lib/js-web"]
        defines:    ["DM_PLATFORM_HTML5", "GL_ES_VERSION_2_0"]
        flags:      ["-fno-exceptions", "-s", "EXPORTED_FUNCTIONS=[\"_JSWriteDump\",\"_main\"]"]
        linkFlags:  ["--pre-js {{dynamo_home}}/share/js-web-pre.js", "--emit-symbol-map", "--llvm-lto", "0", "--memory-init-file", "0"]
        emscriptenFlags: ["PRECISE_F32=2", "AGGRESSIVE_VARIABLE_ELIMINATION=1", "TOTAL_MEMORY=268435456", "DISABLE_EXCEPTION_CATCHING=1", "EXPORTED_FUNCTIONS=[\"_JSWriteDump\",\"_main\"]"]
        libs:       []

    exePrefix:      ''
    exeExt:         '.js'
    shlibRe:        'lib(.+).so'
    stlibRe:        'lib(.+).a'
    sourceRe:       '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)'
    writeLibPattern: 'lib%s.a'
    writeExePattern: 'dmengine.js'
    allowedLibs:    []
    allowedFlags:   ["-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)"]
    compileCmd:     'em++ -c -O3 -g {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o {{tgt}}'
    linkCmd:        'em++ {{#src}}{{{.}}} {{/src}} -o {{tgt}} -O3 {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#emscriptenFlags}}-s {{{.}}} {{/emscriptenFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libPaths}}-L{{{.}}} {{/libPaths}} -Wl,--start-group {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} -Wl,--end-group {{#ext.jsLibs}}--js-library {{{.}}} {{/ext.jsLibs}} {{#engineJsLibs}}--js-library {{dynamo_home}}/lib/js-web/js/library_{{{.}}}.js {{/engineJsLibs}}'
    libCmd:         'emar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'


  x86_64-win32:
    env:
        TMP:        "{{build_folder}}"
        TEMP:       "{{build_folder}}"
    context:
        engineLibs: ["libengine","libengine_service","libaxtls","libwebviewext","libadtruthext","libprofilerext","libfacebookext","libgameroomext","libiapext","libpushext","libiacext","librecord","libgameobject","libddf","libresource","libgamesys","libgraphics","libphysics","libBulletDynamics","libBulletCollision","libLinearMath","libBox2D","librender","libscript","libluajit-5.1","libextension","libhid","libinput","libparticle","librig","libdlib","libdmglfw","libgui","libtracking","libcrashext","libliveupdate","libsound","vpx","libFBGPlatform"]
        libPaths:   ["{{dynamo_home}}/lib/x86_64-win32", "{{dynamo_home}}/ext/lib/x86_64-win32", "/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/lib/amd64", "/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/atlmfc/lib/amd64", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/10/Lib/10.0.10240.0/ucrt/x64", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Lib/winv6.3/um/x64"]
        includes:   ["/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/include", "/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/atlmfc/include", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/10/Include/10.0.10240.0/ucrt", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Include/winrt", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Include/um", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Include/shared"]
        defines:    ["DM_PLATFORM_WINDOWS", "LUA_BYTECODE_ENABLE", "_CRT_SECURE_NO_WARNINGS", "_WINSOCK_DEPRECATED_NO_WARNINGS", "__STDC_LIMIT_MACROS", "WINVER=0x0600", "WIN32"]
        flags:      ["-O2", "-Wall", "-Werror=format", "-fvisibility=hidden"]
        linkFlags:  ["-O2", "-fuse-ld=lld"]
        libs:       ["OpenGL32", "Delayimp", "User32", "shell32", "Xinput9_1_0", "OpenAL32", "WS2_32", "IPHlpApi", "DbgHelp"]
        symbols:    ["GameroomExt"]

    exePrefix:      ''
    exeExt:         '.exe'
    shlibRe:        '(.+).dll'
    stlibRe:        '(.+).lib'
    sourceRe:       '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)'
    writeLibPattern: '%s.lib'
    writeExePattern: 'dmengine.exe'
    allowedLibs:    ["(\\w[\\w\\.-]+)"]
    allowedFlags:   ["-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-rdynamic","-Wl,[-_a-zA-Z0-9]+","-fno-rtti","-fpermissive","-Wl,/subsystem:(console|windows)","-Wl,/entry:\\w+","-f\\w[\\w-]+"]
    compileCmd:     'clang++ -target x86_64-pc-win32-msvc -m64 -g -gcodeview  {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -c -o {{tgt}}'
    linkCmd:        'clang++ -target x86_64-pc-win32-msvc -m64 -g -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd:         '/usr/bin/ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'
    windresCmd:     'windres -i {{dynamo_home}}/lib/x86_64-win32/engine.rc -O coff -o {{tgt}}'

  x86-win32:
    env:
        TMP:        "{{build_folder}}"
        TEMP:       "{{build_folder}}"
    context:
        engineLibs: ["libengine","libengine_service","libaxtls","libwebviewext","libadtruthext","libprofilerext","libfacebookext","libgameroomext","libiapext","libpushext","libiacext","librecord","libgameobject","libddf","libresource","libgamesys","libgraphics","libphysics","libBulletDynamics","libBulletCollision","libLinearMath","libBox2D","librender","libscript","libluajit-5.1","libextension","libhid","libinput","libparticle","librig","libdlib","libdmglfw","libgui","libtracking","libcrashext","libliveupdate","libsound","vpx","libFBGPlatform"]
        libPaths:   ["{{dynamo_home}}/lib/win32","{{dynamo_home}}/ext/lib/win32","/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/lib/", "/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/atlmfc/lib", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/10/Lib/10.0.10240.0/ucrt/x86", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Lib/winv6.3/um/x86"]
        includes:   ["/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/include", "/var/extender/.wine/drive_c/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/atlmfc/include", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/10/Include/10.0.10240.0/ucrt", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Include/winrt", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Include/um", "/var/extender/.wine/drive_c/ProgramFilesx86/WindowsKits/8.1/Include/shared"]
        defines:    ["DM_PLATFORM_WINDOWS", "LUA_BYTECODE_ENABLE", "_CRT_SECURE_NO_WARNINGS", "_WINSOCK_DEPRECATED_NO_WARNINGS", "__STDC_LIMIT_MACROS", "WINVER=0x0600", "WIN32"]
        flags:      ["-O2", "-Wall", "-Werror=format", "-fvisibility=hidden"]
        linkFlags:  ["-O2", "-fuse-ld=lld"]
        libs:       ["OpenGL32", "Delayimp", "User32", "shell32", "Xinput9_1_0", "OpenAL32", "WS2_32", "IPHlpApi", "DbgHelp"]
        symbols:    ["GameroomExt"]

    exePrefix:      ''
    exeExt:         '.exe'
    shlibRe:        '(.+).dll'
    stlibRe:        '(.+).lib'
    sourceRe:       '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)'
    writeLibPattern: '%s.lib'
    writeExePattern: 'dmengine.exe'
    allowedLibs:    ["(\\w[\\w\\.-]+)"]
    allowedFlags:   ["-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-rdynamic","-Wl,[-_a-zA-Z0-9,]+","-fno-rtti","-fpermissive","-Wl,/subsystem:(console|windows)","-Wl,/entry:\\w+","-f\\w[\\w-]+"]
    compileCmd:     'clang++ -target i386-pc-win32-msvc -m32 -g -gcodeview {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -c -o {{tgt}}'
    linkCmd:        'clang++ -target i386-pc-win32-msvc -m32 -g -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd:         '/usr/bin/ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'
    windresCmd:     'windres -i {{dynamo_home}}/lib/win32/engine.rc -O coff --target=pe-i386 -o {{tgt}}'

  x86_64-wine32:
    env:
        TMP:        "{{build_folder}}"
        TEMP:       "{{build_folder}}"
        WINEPATH:   "C:/Program Files (x86)/MSBuild/14.0/bin;C:/Program Files (x86)/Microsoft Visual Studio 14.0/Common7/IDE/;C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/BIN/x86_amd64;C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/BIN;C:/Program Files (x86)/Microsoft Visual Studio 14.0/Common7/Tools;C:/WINDOWS/Microsoft.NET/Framework/v4.0.30319;C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/VCPackages;C:/Program Files (x86)/HTML Help Workshop;C:/Program Files (x86)/Microsoft Visual Studio 14.0/Team Tools/Performance Tools;C:/ProgramFilesx86/WindowsKits/8.1/bin/x64;C:/Program Files (x86)/Microsoft SDKs/Windows/v10.0A/bin/NETFX 4.6.1 Tools/"
    context:
        engineLibs: ["libengine","libengine_service","libaxtls","libwebviewext","libadtruthext","libprofilerext","libfacebookext","libgameroomext","libiapext","libpushext","libiacext","librecord","libgameobject","libddf","libresource","libgamesys","libgraphics","libphysics","libBulletDynamics","libBulletCollision","libLinearMath","libBox2D","librender","libscript","libluajit-5.1","libextension","libhid","libinput","libparticle","librig","libdlib","libdmglfw","libgui","libtracking","libcrashext","libliveupdate","libsound","vpx"]
        libPaths:   ["{{dynamo_home}}/lib/x86_64-win32","{{dynamo_home}}/ext/lib/x86_64-win32","C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/LIB/amd64","C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/ATLMFC/LIB/amd64","C:/ProgramFilesx86/WindowsKits/10/lib/10.0.10240.0/ucrt/x64","C:/ProgramFilesx86/WindowsKits/NETFXSDK/4.6.1/lib/um/x64","C:/ProgramFilesx86/WindowsKits/8.1/lib/winv6.3/um/x64"]
        includes:   ["C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/INCLUDE","C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/ATLMFC/INCLUDE","C:/ProgramFilesx86/WindowsKits/10/include/10.0.10240.0/ucrt","C:/ProgramFilesx86/WindowsKits/NETFXSDK/4.6.1/include/um","C:/ProgramFilesx86/WindowsKits/8.1/include/shared","C:/ProgramFilesx86/WindowsKits/8.1/include/um","C:/ProgramFilesx86/WindowsKits/8.1/include/winrt"]
        defines:    ["DM_PLATFORM_WINDOWS", "LUA_BYTECODE_ENABLE"]
        flags:      []
        linkFlags:  []
        libs:       ["OpenGL32.lib", "User32.lib", "shell32.lib", "Xinput9_1_0.lib", "OpenAL32.lib", "WS2_32.lib", "IPHlpApi.lib", "DbgHelp.lib"]
        symbols:    ["GameroomExt"]

    exePrefix:      ''
    exeExt:         '.exe'
    shlibRe:        '(.+).dll'
    stlibRe:        '(.+).lib'
    sourceRe:       '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)'
    writeLibPattern: '%s.lib'
    writeExePattern: 'dmengine.exe'
    allowedLibs:    ["(\\w[\\w\\.-]+)"]
    allowedFlags:   ["//W([0-4]?|all|X)", "//w([1-4]?|d|e|o)[0-9]{4}", "//O([1-2]?|b|d|g|i|s)", "//openmp","/subsystem:(console|windows)","/entry:\\w+"]
    compileCmd:     'wine cl.exe /nologo /TP /O2 /Oy- /Z7 /MT /D__STDC_LIMIT_MACROS /DWINVER=0x0600 /D_WIN32_WINNT=0x0600 /DWIN32 /D_CRT_SECURE_NO_WARNINGS /wd4200 /W3 /EHsc {{#defines}}/D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}/I{{{.}}} {{/ext.includes}} {{#includes}}/I{{{.}}} {{/includes}} {{src}} /c /Fo{{tgt}}'
    linkCmd:        'wine link.exe {{#src}}{{{.}}} {{/src}} /OUT:{{tgt}} /NOLOGO /MANIFEST {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}/LIBPATH:{{{.}}} {{/ext.libPaths}} {{#libPaths}}/LIBPATH:{{{.}}} {{/libPaths}} {{#libs}}{{{.}}} {{/libs}} {{#ext.libs}}{{{.}}}.lib {{/ext.libs}} {{#engineLibs}}{{{.}}}.lib {{/engineLibs}}'
    libCmd:         'wine lib.exe /nologo /OUT:{{tgt}} {{#objs}}{{{.}}} {{/objs}}'
    windresCmd:      'windres -i {{dynamo_home}}/lib/x86_64-win32/engine.rc -O coff -o {{tgt}}'

  x86-wine32:
    env:
        TMP:        "{{build_folder}}"
        TEMP:       "{{build_folder}}"
        WINEPATH:   "C:/Program Files (x86)/MSBuild/14.0/bin;C:/Program Files (x86)/Microsoft Visual Studio 14.0/Common7/IDE/;C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/BIN;C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/BIN;C:/Program Files (x86)/Microsoft Visual Studio 14.0/Common7/Tools;C:/WINDOWS/Microsoft.NET/Framework/v4.0.30319;C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/VCPackages;C:/Program Files (x86)/HTML Help Workshop;C:/Program Files (x86)/Microsoft Visual Studio 14.0/Team Tools/Performance Tools;C:/ProgramFilesx86/WindowsKits/8.1/bin/x86;C:/Program Files (x86)/Microsoft SDKs/Windows/v10.0A/bin/NETFX 4.6.1 Tools/"
    context:
        engineLibs: ["libengine","libengine_service","libaxtls","libwebviewext","libadtruthext","libprofilerext","libfacebookext","libgameroomext","libiapext","libpushext","libiacext","librecord","libgameobject","libddf","libresource","libgamesys","libgraphics","libphysics","libBulletDynamics","libBulletCollision","libLinearMath","libBox2D","librender","libscript","libluajit-5.1","libextension","libhid","libinput","libparticle","librig","libdlib","libdmglfw","libgui","libtracking","libcrashext","libliveupdate","libsound","vpx"]
        libPaths:   ["{{dynamo_home}}/lib/win32","{{dynamo_home}}/ext/lib/win32","C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/LIB","C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/ATLMFC/LIB","C:/ProgramFilesx86/WindowsKits/10/lib/10.0.10240.0/ucrt/x86","C:/ProgramFilesx86/WindowsKits/NETFXSDK/4.6.1/lib/um/x86","C:/ProgramFilesx86/WindowsKits/8.1/lib/winv6.3/um/x86"]
        includes:   ["C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/INCLUDE","C:/ProgramFilesx86/MicrosoftVisualStudio14.0/VC/ATLMFC/INCLUDE","C:/ProgramFilesx86/WindowsKits/10/include/10.0.10240.0/ucrt","C:/ProgramFilesx86/WindowsKits/NETFXSDK/4.6.1/include/um","C:/ProgramFilesx86/WindowsKits/8.1/include/shared","C:/ProgramFilesx86/WindowsKits/8.1/include/um","C:/ProgramFilesx86/WindowsKits/8.1/include/winrt"]
        defines:    ["DM_PLATFORM_WINDOWS", "LUA_BYTECODE_ENABLE"]
        flags:      []
        linkFlags:  []
        libs:       ["OpenGL32.lib", "User32.lib", "shell32.lib", "Xinput9_1_0.lib", "OpenAL32.lib", "WS2_32.lib", "IPHlpApi.lib", "DbgHelp.lib"]
        symbols:    ["GameroomExt"]

    exePrefix:      ''
    exeExt:         '.exe'
    shlibRe:        '(.+).dll'
    stlibRe:        '(.+).lib'
    sourceRe:       '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)'
    writeLibPattern: '%s.lib'
    writeExePattern: 'dmengine.exe'
    allowedLibs:    ["(\\w[\\w\\.-]+)"]
    allowedFlags:   ["//W([0-4]?|all|X)", "//w([1-4]?|d|e|o)[0-9]{4}", "//O([1-2]?|b|d|g|i|s)", "//openmp","/subsystem:(console|windows)","/entry:\\w+"]
    compileCmd:     'wine cl.exe /nologo /TP /O2 /Oy- /Z7 /MT /D__STDC_LIMIT_MACROS /DWINVER=0x0600 /D_WIN32_WINNT=0x0600 /DWIN32 /D_CRT_SECURE_NO_WARNINGS /wd4200 /W3 /EHsc {{#defines}}/D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}/I{{{.}}} {{/ext.includes}} {{#includes}}/I{{{.}}} {{/includes}} {{src}} /c /Fo{{tgt}}'
    linkCmd:        'wine link.exe {{#src}}{{{.}}} {{/src}} /OUT:{{tgt}} /NOLOGO /MANIFEST {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}/LIBPATH:{{{.}}} {{/ext.libPaths}} {{#libPaths}}/LIBPATH:{{{.}}} {{/libPaths}} {{#libs}}{{{.}}} {{/libs}} {{#ext.libs}}{{{.}}}.lib {{/ext.libs}} {{#engineLibs}}{{{.}}}.lib {{/engineLibs}}'
    libCmd:         'wine lib.exe /nologo /OUT:{{tgt}} {{#objs}}{{{.}}} {{/objs}}'
    windresCmd:     'windres -i {{dynamo_home}}/lib/win32/engine.rc -O coff -o {{tgt}}'

  x86_64-linux:
    context:
        engineLibs: ["engine", "engine_service", "axtls", "webviewext", "adtruthext", "profilerext", "gameroomext", "facebookext", "iapext", "pushext", "iacext", "record", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "lua", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "liveupdate", "sound", "tremolo", "vpx"]
        libPaths:   ["{{dynamo_home}}/lib/x86_64-linux","{{dynamo_home}}/ext/lib/x86_64-linux"]
        includes:   ["{{dynamo_home}}/include/x86_64-linux"]
        defines:    ["DM_PLATFORM_LINUX", "__STDC_LIMIT_MACROS"]
        flags:      ["-ffloat-store", "-g", "-O2", "-D__STDC_LIMIT_MACROS", "-Wall", "-Werror=format", "-fno-exceptions", "-fPIC", "-fvisibility=hidden"]
        linkFlags:  []
        libs:       []
        # this happens to contain some dynamic engine libs too (openal)
        dynamicLibs: ["openal","Xext","X11","Xi","GL","GLU","pthread","m","dl"]

    exePrefix:      ''
    exeExt:         ''
    shlibRe:        'lib(.+).so'
    stlibRe:        'lib(.+).a'
    sourceRe:       '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)'
    writeLibPattern: 'lib%s.a'
    writeExePattern: 'dmengine'
    allowedLibs:    ["sotruss-lib","IBM871","CP1256","SJIS","IBM865","CWI","BRF","CP772","IBM933","CP774","VISCII","IBM420","UTF-7","IBM423","IBM891","IBM939","IBM4909","T.61","JISX0213","IBM930","IBM851","IBM1155","IBM4517","ISO_6937-2","IBM275","IBM856","NATS-DANO","RK1048","EBCDIC-FR","HP-GREEK8","TIS-620","MAC-IS","ISOIR165","MAC-SAMI","CP737","IBM868","LATIN-GREEK","PT154","IBM1162","EBCDIC-UK","IBM1122","CP1251","IBM284","IBM281","ISO8859-9E","IBM880","IBM862","CP771","EBCDIC-AT-DE-A","IBM918","HP-TURKISH8","IBM1046","IBM866","CP1258","ISO_6937","IBM1124","ISO8859-6","IBM437","IBM500","ISO8859-9","IBM1008_420","EBCDIC-IS-FRISS","INIS-8","CP10007","IBM1163","HP-THAI8","KOI-8","CNS","IBM9448","IBM274","IBM855","TCVN5712-1","IBM866NAV","ISO_11548-1","ISO8859-10","IBM9030","KOI8-T","IBM861","SHIFT_JISX0213","IBM4971","IBM857","IBM875","IBM424","IEC_P27-1","IBM863","UTF-16","KOI8-U","GREEK-CCITT","ISO_5427-EXT","GB18030","ISO8859-11","HP-ROMAN8","ANSI_X3.110","IBM803","EUC-JP-MS","IBM1158","IBM1147","IBM852","UHC","IBM1161","ISO8859-13","IBM1160","TSCII","GBK","IBM1047","UNICODE","ISO8859-15","IBM1129","IBM1130","ISO-2022-CN-EXT","IBM1026","ISO8859-14","ISO8859-7","MACINTOSH","IBM850","IBM904","IBM864","CP1257","ISIRI-3342","ISO8859-3","CP932","EBCDIC-ES-S","IBM937","IBM1132","IBM1144","IBM869","ISO646","EUC-CN","CP1255","IBM1142","CP1253","IBM1140","GEORGIAN-PS","IBM1156","EBCDIC-ES","IBM256","MIK","IBM1008","CP1254","IBM921","JIS","LATIN-GREEK-1","GBGBK","IBM874","IBM1167","IBM1364","ISO-2022-JP","ISO8859-16","ISO8859-5","IBM1123","IBM901","GBBIG5","IBM1153","IBM1112","GOST_19768-74","INIS","IBM037","EBCDIC-DK-NO","IBM902","IBM4899","ISO-2022-JP-3","ARMSCII-8","IBM5347","ISO_5428","IBM932","IBM1149","IBM1388","IBM1164","IBM1146","EBCDIC-PT","IBM903","CP1125","ISO_5427","EBCDIC-FI-SE-A","IBM297","EBCDIC-CA-FR","EBCDIC-FI-SE","EUC-JISX0213","MAC-CENTRALEUROPE","IBM1025","KOI8-RU","EUC-JP","IBM1399","EBCDIC-ES-A","CP775","EBCDIC-DK-NO-A","BIG5","EUC-KR","IBM1166","IBM9066","ISO-2022-CN","ISO8859-2","ISO8859-4","EUC-TW","IBM1137","UTF-32","MAC-UK","IBM1371","EBCDIC-US","IBM285","IBM1390","IBM290","CP773","IBM1145","IBM943","ASMO_449","CP1252","IBM870","IBM277","ISO_10367-BOX","NATS-SEFI","KSC","IBM273","GB","JOHAB","IBM1154","ISO-IR-209","SAMI-WS2","IBM278","GREEK7-OLD","BIG5HKSCS","IBM1143","IBM905","CSN_369103","IBM16804","IBM935","IBM280","ISO_2033","HP-ROMAN9","IBM038","IBM860","GEORGIAN-ACADEMY","INIS-CYRILLIC","ISO8859-8","IBM1004","IBM1148","CP1250","IBM922","ISO8859-1","IBM1133","IBM1097","IBM12712","ISO-2022-KR","IBM1141","IBM1157","EBCDIC-IT","EBCDIC-AT-DE","GREEK7","ECMA-CYRILLIC","DEC-MCS","ISO-IR-197","KOI8-R","CP770","stdbuf","Socket","IO","POSIX","Util","Util","attributes","Cwd","Fcntl","re","Glob","SysV","threads","shared","Socket","B","SDBM_File","Peek","PPPort","IO","Collate","Storable","Piece","HiRes","ODBM_File","POSIX","NDBM_File","SHA","MD5","FieldHash","Util","mro","Langinfo","Util","GDBM_File","attributes","Call","mmap","via","scalar","encoding","Cwd","Dumper","Syslog","Hostname","Opcode","FastCalc","DB_File","Fcntl","Base64","re","EBCDIC","TW","Unicode","CN","Encode","KR","Symbol","JP","Byte","NamedCapture","DosGlob","Glob","Bzip2","Zlib","arybase","db-5.3","v4l2convert","v4l-mplane","v4l1compat","tp6801","sipix_web2","jd11","enigma13","sipix_blink2","samsung","barbie","ricoh","smal","gsmart300","kodak_dc120","konica","sq905","jamcam","kodak_dc210","sony_dscf1","sx330z","mustek","polaroid_pdc320","panasonic_dc1580","panasonic_l859","jl2005a","sonix","spca50x","digigr8","polaroid_pdc640","st2205","pccam300","panasonic_dc1000","panasonic_coolshot","sierra","pentax","largan","dimera3500","adc65","kodak_ez200","mars","polaroid_pdc700","topfield","ax203","ricoh_g3","toshiba_pdrm11","clicksmart310","pccam600","stv0674","dimagev","agfa_cl20","jl2005c","lg_gsm","konica_qm150","iclick","directory","soundvision","fuji","ptp2","canon","kodak_dc3200","sony_dscf55","digita","casio_qv","hp215","aox","kodak_dc240","stv0680","asound_module_ctl_arcam_av","asound_module_pcm_oss","asound_module_ctl_oss","asound_module_pcm_usb_stream","asound_module_pcm_pulse","asound_module_pcm_jack","asound_module_rate_samplerate","asound_module_ctl_pulse","asound_module_conf_pulse","smixer-hda","smixer-ac97","smixer-sbase","asound_module_pcm_speex","asound_module_pcm_vdownmix","asound_module_rate_speexrate","asound_module_pcm_upmix","ptpip","usbdiskdirect","usb1","usbscsi","serial","disk","gsttcp","gstaudiorate","gstogg","gstaudioconvert","gstaudioresample","gsttheora","gstlibvisual","gstcoreelements","gstvideotestsrc","gstgio","gstvorbis","gstvolume","gstencodebin","gstcoretracers","gstaudiotestsrc","gstplayback","gstopus","gsttypefindfunctions","gstvideoscale","gstvideoconvert","gstadder","gstapp","gstsubparse","gstcdparanoia","gstvideorate","nn","pulsecommon-8.0","drm_intel","opcodes-2.26.1-system","Xft","bfd-2.26.1-system","drm_radeon","Mrm","m","X11","rt","util","xcb-xfixes","xshmfence","pthread","expat","dl","X11-xcb","crypto","BrokenLocale","GLw","uuid","mvec","Xm","chil","nuron","cswift","4758cca","padlock","gost","gmp","aep","atalla","sureware","ubsec","capi","xcb-randr","mvec_nonshared","glut","xcb","freetype","fontconfig","xcb-dri3","mcheck","nsl","Xdmcp","drm","elf-0.165","drm_amdgpu","drm_nouveau","xcb-sync","c","resolv","ssl","Xrender","Xi","GLU","Xfixes","Xau","m","xcb-dri2","pthread_nonshared","png12","ieee","xcb-glx","Xext","xcb-render","anl","rpcsvc","SM","c_nonshared","c","ICE","xcb-present","Xt","z","virtio_gpu_dri","i965_dri","i915_dri","vmwgfx_dri","r300_dri","radeon_dri","kms_swrast_dri","r200_dri","swrast_dri","nouveau_dri","nouveau_vieux_dri","radeonsi_dri","r600_dri","g","Uil","Xdamage","Xxf86vm","expatw","xcb-shape","pthread","crypt"]
    allowedFlags:   ["-Wa,{{comma_separated_arg}}","-W{{warning}}","-Wno-{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+98|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)","-rdynamic","-Wl,[-_a-zA-Z0-9]+","-fno-rtti","-fpermissive"]
    compileCmd:     '/usr/bin/g++ {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -c -o {{tgt}}'
    linkCmd:        '/usr/bin/g++ {{#src}}{{{.}}} {{/src}} -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libPaths}}-L{{{.}}} {{/libPaths}} -Wl,-Bstatic -Wl,--start-group {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} -Wl,--end-group -Wl,-Bdynamic {{#dynamicLibs}}-l{{{.}}} {{/dynamicLibs}}'
    libCmd:         '/usr/bin/ar rcs {{tgt}} {{#objs}}{{.}} {{/objs}}'
