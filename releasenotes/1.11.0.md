# Defold 1.11.0

## Summary
* __BREAKING CHANGE__: ([#9529,#7441,#6165,#5679,#5631](https://github.com/defold/defold/pull/10483)) ⚠️ Removed `scale_along_z` from the engine (by AGulev)
* __NEW__: ([#10632](https://github.com/defold/defold/pull/11077)) Make aspect ratio–related function in the `camera.*` module useful (by AGulev)
* __NEW__: ([#10692](https://github.com/defold/defold/pull/11081)) Added physics solver parameters into `game.project` -> `Box2D` (by AGulev)
* __NEW__: ([#10795](https://github.com/defold/defold/pull/11083)) Enable `go.exists()` to query the existence of game objects across collections (by AGulev)
* __NEW__: ([#10781](https://github.com/defold/defold/pull/11064)) Add a preference to disable auto-closing parens in the editor. (by vlaaad)
* __NEW__: ([#8737](https://github.com/defold/defold/pull/11065)) Make editor server port more accessible (by vlaaad)
* __NEW__: ([#10407](https://github.com/defold/defold/pull/11089)) Add `zip.unpack` editor script function (by vlaaad)
* __NEW__: ([#3157](https://github.com/defold/defold/pull/11125)) Show settings from `/game.properties` and `ext.properties` (by vlaaad)
* __FIX__: ([#10404](https://github.com/defold/defold/pull/11058)) Fixed an issue where a 16k x 16k atlas couldn’t be unpacked if the file size was bigger than 1 GB (by AGulev)
* __FIX__: ([#11011](https://github.com/defold/defold/pull/11033)) Fixed crash when a material constant was used in a cloned node but the prototype node had been removed (by AGulev)
* __FIX__: ([#11010](https://github.com/defold/defold/pull/11010)) Fix leaks in `sys.*` module on iOS and macOS (by AGulev)
* __FIX__: ([#11017](https://github.com/defold/defold/pull/11021)) Fix few `b2d.body` functions that always throw `vector3 expected, got userdata`. (by AGulev)
* __FIX__: ([#11009](https://github.com/defold/defold/pull/11023)) Fix multipage atlas issue on HTML5 target running on Chrome on Android (by AGulev)
* __FIX__: ([#11034](https://github.com/defold/defold/pull/11034)) An attempt to create an atlas bigger than 16384x16384 throws an error (by AGulev)
* __FIX__: ([#10840,#8784](https://github.com/defold/defold/pull/11038)) Make it possible to work with rotated images in runtime-created atlases (by AGulev)
* __FIX__: ([#8728](https://github.com/defold/defold/pull/11039)) Fix precision issue with multipage atlas (by AGulev)
* __FIX__: ([#9392,#8540,#10453](https://github.com/defold/defold/pull/11041)) Fix `PANIC: unprotected error...` in some rare cases in Lua (by AGulev)
* __FIX__: ([#5549](https://github.com/defold/defold/pull/11046)) Fixed issue when `sys.open_url()` reports false when a url is opened on Windows (by AGulev)
* __FIX__: ([#11060](https://github.com/defold/defold/pull/11061)) Fixed an issue where files larger than 2GB couldn’t be read on windows (by AGulev)
* __FIX__: ([#11066](https://github.com/defold/defold/pull/11066)) Added sdk test for macos, ios, linux and android when running check_sdk (by JCash)
* __FIX__: ([#6577](https://github.com/defold/defold/pull/11073)) Fix multi-contour artifacts in DF font generator (by AGulev)
* __FIX__: ([#11069](https://github.com/defold/defold/pull/11078)) Show an error message if the decoder for a used sound isn't included in the App Manifest (by AGulev)
* __FIX__: ([#11099](https://github.com/defold/defold/pull/11099)) Fix issue with duplicated meshes in models with hierarchies (by jixingcn)
* __FIX__: ([#9603](https://github.com/defold/defold/pull/11097)) Fix issue where some non-skinned GLTF/GLB models were rendered incorrectly (by jixingcn)
* __FIX__: ([#11020,#11020](https://github.com/defold/defold/pull/11049)) Set center panel minimum width (by sprocketc)
* __FIX__: ([#11067](https://github.com/defold/defold/pull/11068)) Fix drag and drop NullPointerException (by sprocketc)
* __FIX__: ([#11074,#11076](https://github.com/defold/defold/pull/11075)) Fix selection context on outline label double click, and no selection npe (by sprocketc)
* __FIX__: ([#11117](https://github.com/defold/defold/pull/11116)) Cancel outline rename on drag (by sprocketc)
* __FIX__: ([#11112](https://github.com/defold/defold/pull/11112)) Use custom markdown/HTML viewer instead of a web view (by vlaaad)

## Engine
__BREAKING CHANGE__: ([#9529,#7441,#6165,#5679,#5631](https://github.com/defold/defold/pull/10483)) __'⚠️ Removed `scale_along_z` from the engine'__ by AGulev
`scale_along_z` has been fully removed from the engine. Read the following information to understand how to migrate your projects.

### ⚠️⚠️⚠️ Action Needed (Breaking Change)

#### What is `scale_along_z`?
`scale_along_z` was a hidden option in `*.collection` files, set to `0` by default.  
When set to `0`, scaling on objects and collections did **not** affect their z-position.  

For example, if your sprite has a position `x: 0.0, y: 0.0, z: 0.1`, and its GameObject has a scale `x: 1.0, y: 1.0, z: 2.0`:
- With `scale_along_z = 0`, the transform of the sprite remains `x: 0.0, y: 0.0, z: 0.1`
- With `scale_along_z = 1`, the transform becomes `x: 0.0, y: 0.0, z: 0.2`

#### Why Was It Removed?
This was a legacy feature that introduced special-case logic and added complexity to the engine. While it had utility in some 2D projects, it was often a source of confusion in 3D projects. To unify 2D and 3D workflows, we’ve made the difficult decision to remove it, even though it’s a breaking change.

#### Who Needs to Take Action?
If you are unfamiliar with `scale_along_z`, or you never explicitly set it to `1`, **you need to update your project**. If your project consistently used `scale_along_z: 1` across all collections, **no action is required**.

#### What Should Be Done in Lua Code?
To avoid unexpected behavior now that scaling affects Z-position:

- Replace all usages of `go.set_scale(number|vector3)` with `go.set_scale_xy(number|vector3)`
- When accessing the `scale` property via `go.get()`, `go.set()`, or `go.animate()`, use the `scale.xy` property instead

#### What Should Be Done in Project Files?
Review your GameObjects and Collections and check for use of the Z component in the `scale` property.  
If you find a non 1.0 Z scale in your project, investigate why it's there. In most of 2D cases, the Z scale should always be 1.0 because it doesn't affect anything. However, in some cases—such as pseudo-3D effects, perspective cameras, particles, 3D models, etc. Z-scaling may be intentional. These situations require manual review.

If all children of such an object have `position.z == 0`, then behavior will not change.  
But if `position.z` is non-zero, then the scale will now affect it, and you'll need to decide case by case how to proceed based on your game’s requirements.  
For example:
- You might need to adjust object positions to compensate for `scale.z` now affecting the children's positions.
- Or, set the parent object's `scale.z` to 1.0 and instead scale all children individually (adjusting positions accordingly).

Automatic migration is not possible due to the variety of use cases.  
Please review and adjust your project accordingly.  

We apologize for the inconvenience and hope that this change leads to a more consistent and understandable workflow for all users.

__NEW__: ([#10632](https://github.com/defold/defold/pull/11077)) __'Make aspect ratio–related function in the `camera.*` module useful'__ by AGulev
Changes in APIs:  
`camera.get_aspect_ratio()` – Now returns the effective aspect ratio (auto-calculated if auto is enabled, manual value if disabled)  
`camera.set_aspect_ratio()` – Sets the manual aspect ratio value, which is used only if auto is disabled  
`camera.get_auto_aspect_ratio()` – Returns whether auto-calculation is enabled  
`camera.set_auto_aspect_ratio()` –  Controls whether to use auto-calculation or the manual value

__NEW__: ([#10692](https://github.com/defold/defold/pull/11081)) __'Added physics solver parameters into `game.project` -> `Box2D`'__ by AGulev
Added new `[box2d]` section in game.project:
  - `velocity_iterations` (default: 10) - Box2D 2.2 velocity solver iterations
  - `position_iterations` (default: 10) - Box2D 2.2 position solver iterations
  - `sub_step_count` (default: 4) - Box2D 3.x sub-stepping count
  
Using these new parameters, users can reduce iterations for better performance or increase for higher precision.

__NEW__: ([#10795](https://github.com/defold/defold/pull/11083)) __'Enable `go.exists()` to query the existence of game objects across collections'__ by AGulev
With this fix, it will be possible to use the `go.exists()` function to check if a game object exists in another collection.

__FIX__: ([#10404](https://github.com/defold/defold/pull/11058)) __'Fixed an issue where a 16k x 16k atlas couldn’t be unpacked if the file size was bigger than 1 GB'__ by AGulev
The 1 GB limitation for compressed files was doubled to make it possible to work with 16k x 16k atlases.

__FIX__: ([#11011](https://github.com/defold/defold/pull/11033)) __'Fixed crash when a material constant was used in a cloned node but the prototype node had been removed'__ by AGulev
This fix creates a separate material constant buffer for cloned nodes. This not only fixes the crash when the prototype node is removed, but also makes it possible to use independent values per cloned node.

__FIX__: ([#11010](https://github.com/defold/defold/pull/11010)) __'Fix leaks in `sys.*` module on iOS and macOS'__ by AGulev
Fixed a couple of leaks in the `sys.*` module, and freed memory allocated for a mount name upon unmount.

__FIX__: ([#11017](https://github.com/defold/defold/pull/11021)) __'Fix few `b2d.body` functions that always throw `vector3 expected, got userdata`.'__ by AGulev


__FIX__: ([#11009](https://github.com/defold/defold/pull/11023)) __'Fix multipage atlas issue on HTML5 target running on Chrome on Android'__ by AGulev
Fixed an issue where multipage atlas can't be transcoded and used in HTML5 on Chrome on Android. In such cases, the ASTC format will be marked as unsupported, and the next suitable format will be used (ETC2 in most cases).

__FIX__: ([#11034](https://github.com/defold/defold/pull/11034)) __'An attempt to create an atlas bigger than 16384x16384 throws an error'__ by AGulev
Most modern GPUs don't support textures larger than 16384x16384. Defold doesn't support it either, and this fix simply adds a proper error to notify the user about the issue if they try to create such a texture.

__FIX__: ([#10840,#8784](https://github.com/defold/defold/pull/11038)) __'Make it possible to work with rotated images in runtime-created atlases'__ by AGulev
With this fix, `resource.get_atlas()` returns the `rotated` flag for geometries, and it's now necessary to add the `rotated` flag for geometries in `resource.set_atlas()`.  
This resolves issues with rotated images in some GUI cases.

__FIX__: ([#8728](https://github.com/defold/defold/pull/11039)) __'Fix precision issue with multipage atlas'__ by AGulev
Fixed an issue where, in a paged atlas, textures were taken from the wrong page. This occurred in rare cases on devices using the WebGL1/OpenGL ES 2.0 graphics backend.

__FIX__: ([#9392,#8540,#10453](https://github.com/defold/defold/pull/11041)) __'Fix `PANIC: unprotected error...` in some rare cases in Lua'__ by AGulev
Fixed `PANIC: unprotected error...` that occurs in cases like `assert(nil, nil)` or `error(hash("something"))`.

__FIX__: ([#5549](https://github.com/defold/defold/pull/11046)) __'Fixed issue when `sys.open_url()` reports false when a url is opened on Windows'__ by AGulev


__FIX__: ([#11060](https://github.com/defold/defold/pull/11061)) __'Fixed an issue where files larger than 2GB couldn’t be read on windows'__ by AGulev
This PR fixes the issue where having an `arcd` archive larger than 2 GB on Windows results in a runtime error:
```
ERROR:RESOURCE: Path to small to fit into buffer: game.arcd
ERROR:RESOURCE: Failed to mount base archive: -1000 for mount archive://game.dmanifest
WARNING:RESOURCE: No resource loaders mounted that could match uri archive:game.dmanifest
```

__FIX__: ([#11066](https://github.com/defold/defold/pull/11066)) __'Added sdk test for macos, ios, linux and android when running check_sdk'__ by JCash
This will help when new contributors setup their environment, to see if their compiler can build and possibly run a test executable.

__FIX__: ([#6577](https://github.com/defold/defold/pull/11073)) __'Fix multi-contour artifacts in DF font generator'__ by AGulev
Fixed DF font artifacts that occur in some fonts with vector shapes overlapping each other:
![](https://forum.defold.com/uploads/default/original/3X/a/e/ae42187237af0d7f75ecce47e55ac5dff1629677.png)<img width="296" height="293" alt="CleanShot 2025-08-09 at 18 40 18@2x" src="https://github.com/user-attachments/assets/4bf77e6a-aa0b-4fae-a1c1-947bf08b2b56" />

__FIX__: ([#11069](https://github.com/defold/defold/pull/11078)) __'Show an error message if the decoder for a used sound isn't included in the App Manifest'__ by AGulev
Fixes an issue where the engine crashes if an `opus` file is used without including the OPUS decoder in the App Manifest. Now the engine shows an error to help figure out what's going on.

__FIX__: ([#11099](https://github.com/defold/defold/pull/11099)) __'Fix issue with duplicated meshes in models with hierarchies'__ by jixingcn
Make sure the final mesh set doesn’t contain duplicated meshes.

__FIX__: ([#9603](https://github.com/defold/defold/pull/11097)) __'Fix issue where some non-skinned GLTF/GLB models were rendered incorrectly'__ by jixingcn
Fixed an issue where flattening of the GLTF/GLB model didn’t take the model hierarchy into account.


## Editor
__NEW__: ([#10781](https://github.com/defold/defold/pull/11064)) __'Add a preference to disable auto-closing parens in the editor.'__ by vlaaad
New preference **Code → Auto-insert closing parens** allows turning off the auto-closing of parens in the editor.

__NEW__: ([#8737](https://github.com/defold/defold/pull/11065)) __'Make editor server port more accessible'__ by vlaaad
When the editor opens a project, it will start a web server on a random port. This port is now written to the `.internal/editor.port` file.

Additionally, we added a command line option `--port` (or `-p`) to the editor executable, which allows specifying the port during launch.

Example use:
```shell
# on Windows
.\Defold.exe --port 8181

# on Linux:
./Defold --port 8181

# on macOS:
./Defold.app/Contents/MacOS/Defold --port 8181
```

__NEW__: ([#10407](https://github.com/defold/defold/pull/11089)) __'Add `zip.unpack` editor script function'__ by vlaaad
Now it's possible to unpack ZIP files using editor scripts, e.g.:
```lua
-- simply unpack
zip.unpack("build/dev/archive.zip")
-- unpack to another directory
zip.unpack("build/dev/archive.zip", "build/dev/tmp")
-- overwrite on conflict
zip.unpack("build/dev/archive.zip", {on_conflict = zip.ON_CONFLICT.OVERWRITE})
-- unpack a subset of files
zip.unpack("build/dev/archive.zip", {"config.json", "src"})
```

__NEW__: ([#3157](https://github.com/defold/defold/pull/11125)) __'Show settings from `/game.properties` and `ext.properties`'__ by vlaaad
Now, `/game.project` form will show settings from `/game.properties`, as well as from `ext.properties` files coming from extensions.

__FIX__: ([#11020,#11020](https://github.com/defold/defold/pull/11049)) __'Set center panel minimum width'__ by sprocketc
Set a minimum width for the center panel.

__FIX__: ([#11067](https://github.com/defold/defold/pull/11068)) __'Fix drag and drop NullPointerException'__ by sprocketc


__FIX__: ([#11074,#11076](https://github.com/defold/defold/pull/11075)) __'Fix selection context on outline label double click, and no selection npe'__ by sprocketc


__FIX__: ([#11117](https://github.com/defold/defold/pull/11116)) __'Cancel outline rename on drag'__ by sprocketc


__FIX__: ([#11112](https://github.com/defold/defold/pull/11112)) __'Use custom markdown/HTML viewer instead of a web view'__ by vlaaad
Improvements:
- smaller editor size (got 30MB lighter)
- faster to open markdown/html files
- now opens relative file links like `See [setup.md](setup.md)`
- now scrolls to header links like `See [license](#license) section`

Regressions:
- no longer shows SVGs (e.g., shields, contributors' avatars)
- not a full-blown HTML viewer anymore (e.g., no div align, no CSS, no JS)

